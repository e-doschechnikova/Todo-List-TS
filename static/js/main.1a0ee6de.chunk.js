(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{166:function(e,t,a){e.exports={error:"Error404_error__3j-Z2"}},185:function(e,t,a){e.exports=a(207)},190:function(e,t,a){},191:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),i=a.n(c);a(190),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,l,s,u,d=a(168),m=a(302),f=a(122),p=a(123),E=(a(191),a(296)),b=a(297),O=a(284),v=a(299),T=a(288),g=a(300),h=a(301),j=a(298),k=a(45),y=a(23),S=a(20),I=a(118),D=I.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"9c1a69da-f1af-40a7-806f-4d3b095c12b8"}}),w=function(){return D.get("todo-lists")},C=function(e){return D.post("todo-lists",{title:e})},A=function(e){return D.delete("todo-lists/".concat(e))},L=function(e,t){return D.put("todo-lists/".concat(e),{title:t})},P=function(e){return D.get("todo-lists/".concat(e,"/tasks"))},x=function(e,t){return D.post("todo-lists/".concat(e,"/tasks"),{title:t})},R=function(e,t){return D.delete("todo-lists/".concat(t,"/tasks/").concat(e))},N=function(e,t,a){return D.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},K=function(e){return D.post("auth/login",e)},F=function(){return D.get("auth/me")},U=function(){return D.delete("auth/login")};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(o||(o={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(l||(l={})),function(e){e[e.OK=0]="OK",e[e.ERROR=1]="ERROR",e[e.CAPTCHA=10]="CAPTCHA"}(s||(s={})),function(e){e.DEFAULT="/",e.LOGIN="login",e.NOT_FOUND="404"}(u||(u={}));var G={isInitialized:!1,status:"loading",error:null},z=function(e){return{type:"APP/SET-STATUS",status:e}},M=function(e){return{type:"APP/SET-ERROR",value:e}},H=function(e,t){t.messages.length?e(M(t.messages[0])):e(M("Some error occurred")),e(z("failed"))},V=function(e,t){e(M(t.message?t.message:"Some error occurred")),e(z("failed"))},Z=[],_=function(e,t){return{type:"SET-ENTITY-STATUS",status:t,id:e}},q=a(21),B=a.n(q),Y=a(30),J=a(4),W={},$=function(e,t){return{type:"REMOVE-TASK",taskID:e,todolistID:t}},Q=function(e,t,a){return function(n,r){var c=r().tasks[t].find((function(t){return t.id===e}));if(c){var i=Object(y.a)({title:c.title,deadline:c.deadline,startDate:c.startDate,description:c.description,priority:c.priority,status:c.status},a);n(z("loading")),N(t,e,i).then((function(r){0===r.data.resultCode?(n(function(e,t,a){return{type:"UPDATE-TASK",taskID:e,model:t,todolistID:a}}(e,a,t)),n(z("succeeded"))):H(n,r.data)})).catch((function(e){V(n,e)})).finally((function(){n(z("idle"))}))}}},X=a(125),ee=a(156),te={isLoggedIn:!1},ae=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},ne=Object(X.b)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":return Object(y.a)(Object(y.a)({},e),{},Object(J.a)({},t.todolistID,e[t.todolistID].filter((function(e){return e.id!==t.taskID}))));case"ADD-TASK":return Object(y.a)(Object(y.a)({},e),{},Object(J.a)({},t.task.todoListId,[t.task].concat(Object(S.a)(e[t.task.todoListId]))));case"UPDATE-TASK":return Object(y.a)(Object(y.a)({},e),{},Object(J.a)({},t.todolistID,e[t.todolistID].map((function(e){return e.id===t.taskID?Object(y.a)(Object(y.a)({},e),t.model):e}))));case"ADD-TODOLIST":return Object(y.a)(Object(y.a)({},e),{},Object(J.a)({},t.todolist.id,[]));case"REMOVE-TODOLIST":var a=Object(y.a)({},e);return delete a[t.id],a;case"SET-TASK":return Object(y.a)(Object(y.a)({},e),{},Object(J.a)({},t.todolistID,t.tasks));case"SET-TODOLISTS":var n=Object(y.a)({},e);return t.todolists.forEach((function(e){n[e.id]=[]})),n;default:return e}},todolists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-TODOLIST":return[Object(y.a)(Object(y.a)({},t.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(S.a)(e));case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"CHANGE-TODOLIST-FILTER":return e.map((function(e){return e.id===t.id?Object(y.a)(Object(y.a)({},e),{},{filter:t.filter}):e}));case"CHANGE-TODOLIST-TITLE":return e.map((function(e){return e.id===t.id?Object(y.a)(Object(y.a)({},e),{},{title:t.title}):e}));case"SET-TODOLISTS":return t.todolists.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{filter:"all",entityStatus:"idle"})}));case"SET-ENTITY-STATUS":return e.map((function(e){return e.id===t.id?Object(y.a)(Object(y.a)({},e),{},{entityStatus:t.status}):e}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(y.a)(Object(y.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(y.a)(Object(y.a)({},e),{},{error:t.value});case"APP/SET-IS-INITIALIZED":return Object(y.a)(Object(y.a)({},e),{},{isInitialized:t.isInitialized});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(y.a)(Object(y.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),re=Object(X.c)(ne,Object(X.a)(ee.a)),ce=function(){return Object(k.b)()},ie=k.c;window.store=re;var oe=a(289),le=a(208),se=a(12),ue=a(304),de=a(285),me=Object(n.memo)((function(e){var t=e.addItem,a=e.disabled,c=r.a.useState(""),i=Object(se.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(!1),u=Object(se.a)(s,2),d=u[0],m=u[1],f=function(){var e=o.trim();e?t(e):m(!0),l("")};return r.a.createElement("div",null,r.a.createElement(ue.a,{variant:"outlined",size:"small",value:o,onChange:function(e){l(e.currentTarget.value),d&&m(!1)},onKeyDown:function(e){return"Enter"===e.key&&f()},label:"Add title",error:d,helperText:d&&"Title is required!",disabled:a}),r.a.createElement(O.a,{color:"secondary",disabled:a},r.a.createElement(de.a,{onClick:f})))})),fe=Object(n.memo)((function(e){var t=e.title,a=e.changeTitle,c=r.a.useState(t),i=Object(se.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(!1),u=Object(se.a)(s,2),d=u[0],m=u[1],f=function(){m(!1),a(o)};return d?r.a.createElement(ue.a,{color:"primary",value:o,onChange:function(e){l(e.currentTarget.value)},onKeyDown:function(e){return"Enter"===e.key&&f()},onBlur:f,autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){m(!0)}},t)})),pe=a(283),Ee=a(287),be=a(286),Oe=a(308),ve=Object(n.memo)((function(e){var t=e.task,a=e.todolistID,c=e.removeTask,i=e.changeTaskStatus,l=e.changeTaskTitle,s=Object(y.a)({},t),u=s.id,d=s.status,m=s.title,f=Object(n.useCallback)((function(){return c(t.id,a)}),[t.id,a,c]),p=Object(n.useCallback)((function(e){var t=e.currentTarget.checked;i(u,a,t?o.Completed:o.New)}),[u,a,i]),E=Object(n.useCallback)((function(e){l(u,e,a)}),[u,a,l]);return r.a.createElement(be.a,{key:u,className:d===o.Completed?"task isDone":"",alignItems:"center",disableGutters:!0,divider:!0},r.a.createElement(Oe.a,{size:"small",color:"primary",onChange:p,checked:d===o.Completed}),r.a.createElement(fe,{title:m,changeTitle:E}),r.a.createElement(O.a,null,r.a.createElement(Ee.a,{onClick:f})))})),Te=Object(n.memo)((function(e){var t=ce();Object(n.useEffect)((function(){var a;t((a=e.todolist.id,function(e){e(z("loading")),P(a).then((function(t){var n=t.data.items;e(function(e,t){return{type:"SET-TASK",tasks:e,todolistID:t}}(n,a)),e(z("succeeded"))}))}))}),[]);var a=e.tasks;"active"===e.todolist.filter&&(a=e.tasks.filter((function(e){return e.status===o.New}))),"completed"===e.todolist.filter&&(a=e.tasks.filter((function(e){return e.status===o.Completed})));var c=function(t){return function(){return e.changeTodoListFilter(t,e.todolist.id)}},i=Object(n.useCallback)((function(t){return e.addTask(t,e.todolist.id)}),[e.addTask,e.todolist.id]),l=a.length?a.map((function(t){return r.a.createElement(ve,{key:t.id,task:t,todolistID:e.todolist.id,removeTask:e.removeTask,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus})})):r.a.createElement("span",null,'I"m empty! Fill me up! ',r.a.createElement("b",null,"\u32e1"));return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(fe,{title:e.todolist.title,changeTitle:function(t){return e.changeTodoListTitle(t,e.todolist.id)}}),r.a.createElement(O.a,{disabled:"loading"===e.entityStatus},r.a.createElement(Ee.a,{color:"primary",onClick:function(){return e.removeTodolist(e.todolist.id)}}))),r.a.createElement(me,{addItem:i,disabled:"loading"===e.entityStatus}),r.a.createElement(pe.a,{style:{listStyle:"none"}},l),r.a.createElement("div",null,r.a.createElement(T.a,{size:"small",variant:"outlined",color:"all"===e.todolist.filter?"secondary":"primary",onClick:c("all"),style:{margin:"5px"}},"All"),r.a.createElement(T.a,{size:"small",variant:"outlined",color:"active"===e.todolist.filter?"secondary":"primary",onClick:c("active"),style:{margin:"5px"}},"Active"),r.a.createElement(T.a,{size:"small",variant:"outlined",color:"completed"===e.todolist.filter?"secondary":"primary",onClick:c("completed"),style:{margin:"5px"}},"Completed")))})),ge=a(16),he=function(){var e=Object(k.c)((function(e){return e.todolists})),t=Object(k.c)((function(e){return e.tasks})),a=ce(),c=Object(k.c)((function(e){return e.auth.isLoggedIn}));Object(n.useEffect)((function(){c&&a((function(e){e(z("loading")),w().then((function(t){e({type:"SET-TODOLISTS",todolists:t.data}),e(z("succeeded"))})).catch((function(){e(z("failed"))}))}))}),[]);var i=Object(n.useCallback)((function(e,t){a(function(e,t){return function(){var a=Object(Y.a)(B.a.mark((function a(n){var r,c,i;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(z("loading")),a.next=4,R(e,t);case 4:n($(e,t)),n(z("succeeded")),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),r=a.t0,I.a.isAxiosError(r)&&(i=(null===(c=r.response)||void 0===c?void 0:c.data)?r.response.data.error:r.message,n(M(i))),n(z("failed"));case 13:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(e,t))}),[a]),o=Object(n.useCallback)((function(e,t){a(function(e,t){return function(a){a(z("loading")),x(t,e).then((function(e){e.data.resultCode===s.OK?(a({type:"ADD-TASK",task:e.data.data.item}),a(z("succeeded"))):H(a,e.data)})).catch((function(e){V(a,e)})).finally((function(){a(z("idle"))}))}}(e,t))}),[a]),l=Object(n.useCallback)((function(e,t,n){a(Q(e,t,{status:n}))}),[a]),d=Object(n.useCallback)((function(e,t,n){a(Q(e,n,{title:t}))}),[a]),m=Object(n.useCallback)((function(e,t){var n=function(e,t){return function(a){a(z("loading")),L(t,e).then((function(n){a(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(e,t)),a(z("succeeded"))}))}}(e,t);a(n)}),[a]),f=Object(n.useCallback)((function(e,t){a(function(e,t){return{type:"CHANGE-TODOLIST-FILTER",id:e,filter:t}}(t,e))}),[a]),p=Object(n.useCallback)((function(e){var t=function(e){return function(t){t(z("loading")),t(_(e,"loading")),A(e).then((function(a){t({type:"REMOVE-TODOLIST",id:e}),t(z("succeeded"))})).catch((function(a){t(_(e,"idle")),V(t,a)})).finally((function(){t(z("idle"))}))}}(e);a(t)}),[a]),E=Object(n.useCallback)((function(e){var t=function(e){return function(t){t(z("loading")),C(e).then((function(e){0===e.data.resultCode?t({type:"ADD-TODOLIST",todolist:e.data.data.item}):H(t,e.data)})).catch((function(e){V(t,e)}))}}(e);a(t)}),[a]),b=e.map((function(e){var a=t[e.id];return r.a.createElement(oe.a,{item:!0,key:e.id},r.a.createElement(le.a,{variant:"elevation",style:{padding:"20px"}},r.a.createElement(Te,{todolist:e,tasks:a,entityStatus:e.entityStatus,addTask:o,removeTask:i,removeTodolist:p,changeTaskStatus:l,changeTodoListFilter:f,changeTaskTitle:d,changeTodoListTitle:m})))}));return c?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{container:!0,style:{padding:"20px 0"}},r.a.createElement(me,{addItem:E})),r.a.createElement(oe.a,{container:!0,spacing:4},b)):r.a.createElement(ge.a,{to:u.LOGIN})},je=a(292),ke=a(309),ye=a(306),Se=n.forwardRef((function(e,t){return n.createElement(ye.a,Object.assign({elevation:6,ref:t,variant:"standard"},e))}));function Ie(){var e=Object(k.b)(),t=ie((function(e){return e.app.error})),a=function(t,a){"clickaway"!==a&&e(M(null))};return n.createElement("div",null,n.createElement(je.a,{spacing:2,sx:{width:"100%"}},n.createElement(ke.a,{open:!!t,autoHideDuration:6e3,onClose:a},n.createElement(Se,{onClose:a,severity:"error",sx:{width:"100%"}},t,"\ud83d\ude20"))))}var De=a(314),we=a(307),Ce=a(310),Ae=a(311),Le=a(316),Pe=a(294),xe=a(303),Re=a(315),Ne=a(167),Ke=function(){var e=ce(),t=Object(k.c)((function(e){return e.auth.isLoggedIn}));Object(n.useEffect)((function(){e(z("succeeded"))}),[]);var a=Object(Ne.a)({initialValues:{email:"",password:"",rememberMe:!1,captcha:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address \u26a0"):t.email="Required",e.password?e.password.length<3&&(t.password="Password should be more 3 symbols \u26a0"):t.password="Required",t},onSubmit:function(t){var n;e((n=t,function(){var e=Object(Y.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z("loading")),e.prev=1,e.next=4,K(n);case 4:(a=e.sent).data.resultCode===s.OK?(t(ae(!0)),t(z("succeeded"))):H(t,a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),V(t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),a.resetForm()}});return t?r.a.createElement(ge.a,{to:u.DEFAULT}):r.a.createElement(De.a,{container:!0,justifyContent:"center"},r.a.createElement(De.a,{item:!0,justifyContent:"center"},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(Ce.a,null,r.a.createElement(Pe.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(Le.a,null,r.a.createElement(xe.a,Object.assign({},a.getFieldProps("email"),{label:"Email",margin:"normal"})),a.errors.email&&r.a.createElement("div",{style:{color:"red"}},a.touched.email&&a.errors.email),r.a.createElement(xe.a,Object.assign({},a.getFieldProps("password"),{type:"password",label:"Password",margin:"normal"})),a.touched.password&&a.errors.password&&r.a.createElement("div",{style:{color:"red"}},a.errors.password),r.a.createElement(Ae.a,{label:"Remember me",control:r.a.createElement(we.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),r.a.createElement(Re.a,{type:"submit",color:"secondary",variant:"outlined"},"Login"))))))},Fe=a(166),Ue=a.n(Fe);function Ge(){var e=ce();return Object(n.useEffect)((function(){e(z("succeeded"))}),[]),r.a.createElement("div",{className:Ue.a.error},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"OOPS! PAGE NOT FOUND!"))}var ze=a(317);var Me=function(){var e=ie((function(e){return e.app.status})),t=ce(),a=ie((function(e){return e.app.isInitialized})),c=Object(k.c)((function(e){return e.auth.isLoggedIn}));return Object(n.useEffect)((function(){t(function(){var e=Object(Y.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z("loading")),e.prev=1,e.next=4,F();case 4:0===(a=e.sent).data.resultCode?(t(ae(!0)),t(z("succeeded"))):H(t,a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),V(t,e.t0);case 11:return e.prev=11,t({type:"APP/SET-IS-INITIALIZED",isInitialized:!0}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}())}),[]),a?r.a.createElement("div",{className:"App"},r.a.createElement(Ie,null),r.a.createElement(E.a,{position:"static",color:"transparent"},r.a.createElement(b.a,{style:{justifyContent:"space-between"}},r.a.createElement(O.a,{edge:"start",color:"secondary","aria-label":"menu"},r.a.createElement(j.a,null)),r.a.createElement(v.a,{variant:"h5"},"Todolists"),c&&r.a.createElement(T.a,{onClick:function(){t(function(){var e=Object(Y.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z("loading")),e.prev=1,e.next=4,U();case 4:(a=e.sent).data.resultCode===s.OK?(t(ae(!1)),t(z("succeeded"))):H(t,a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),V(t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},color:"secondary",variant:"outlined"},"Log out")),"loading"===e&&r.a.createElement(g.a,{color:"secondary"})),r.a.createElement(h.a,{fixed:!0},r.a.createElement(ge.d,null,r.a.createElement(ge.b,{path:"/",element:r.a.createElement(he,null)}),r.a.createElement(ge.b,{path:"login",element:r.a.createElement(Ke,null)}),r.a.createElement(ge.b,{path:"*",element:r.a.createElement(ge.a,{to:"/404"})}),r.a.createElement(ge.b,{path:"/404",element:r.a.createElement(Ge,null)})))):r.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},r.a.createElement(ze.a,{color:"secondary"}))},He=a(91),Ve=Object(d.a)({palette:{primary:f.a,secondary:p.a,type:"light"}});i.a.render(r.a.createElement(k.a,{store:re},r.a.createElement(m.a,{theme:Ve},r.a.createElement(He.a,null,r.a.createElement(Me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.1a0ee6de.chunk.js.map