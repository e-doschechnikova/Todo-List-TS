(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{108:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(10),i=a.n(c);a(94),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,l,s=a(82),u=a(153),d=a(57),f=a(58),m=(a(95),a(148)),O=a(149),b=a(142),T=a(151),E=a(146),k=a(152),p=a(150),j=a(32),v=a(11),h=a(35),y=a(83).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"9c1a69da-f1af-40a7-806f-4d3b095c12b8"}}),g=function(){return y.get("todo-lists")},D=function(t){return y.post("todo-lists",{title:t})},I=function(t){return y.delete("todo-lists/".concat(t))},S=function(t,e){return y.put("todo-lists/".concat(t),{title:e})},C=function(t){return y.get("todo-lists/".concat(t,"/tasks"))},L=function(t,e){return y.post("todo-lists/".concat(t,"/tasks"),{title:e})},A=function(t,e){return y.delete("todo-lists/".concat(e,"/tasks/").concat(t))},w=function(t,e,a){return y.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(l||(l={}));var K=[],N=a(27),x={},R=function(t,e,a){return function(n,r){var c=r().tasks[e].find((function(e){return e.id===t}));if(c){var i=Object(v.a)({title:c.title,deadline:c.deadline,startDate:c.startDate,description:c.description,priority:c.priority,status:c.status},a);w(e,t,i).then((function(r){n(function(t,e,a){return{type:"UPDATE-TASK",taskID:t,model:e,todolistID:a}}(t,a,e))}))}}},F=a(59),M=a(77),H=Object(F.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(v.a)(Object(v.a)({},t),{},Object(N.a)({},e.todolistID,t[e.todolistID].filter((function(t){return t.id!==e.taskID}))));case"ADD-TASK":return Object(v.a)(Object(v.a)({},t),{},Object(N.a)({},e.task.todoListId,[e.task].concat(Object(h.a)(t[e.task.todoListId]))));case"UPDATE-TASK":return Object(v.a)(Object(v.a)({},t),{},Object(N.a)({},e.todolistID,t[e.todolistID].map((function(t){return t.id===e.taskID?Object(v.a)(Object(v.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(v.a)(Object(v.a)({},t),{},Object(N.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var a=Object(v.a)({},t);return delete a[e.id],a;case"SET-TASK":return Object(v.a)(Object(v.a)({},t),{},Object(N.a)({},e.todolistID,e.tasks));case"SET-TODOLISTS":var n=Object(v.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD-TODOLIST":return[Object(v.a)(Object(v.a)({},e.todolist),{},{filter:"all"})].concat(Object(h.a)(t));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{title:e.title}):t}));case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{filter:"all"})}));default:return t}}}),z=Object(F.c)(H,Object(F.a)(M.a)),G=function(){return Object(j.b)()};window.store=z;var P=a(147),U=a(110),V=a(20),B=a(154),J=a(143),W=Object(n.memo)((function(t){var e=r.a.useState(""),a=Object(V.a)(e,2),c=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(V.a)(o,2),s=l[0],u=l[1],d=function(){var e=c.trim();e?t.addItem(e):u(!0),i("")};return r.a.createElement("div",null,r.a.createElement(B.a,{variant:"outlined",size:"small",value:c,onChange:function(t){i(t.currentTarget.value),s&&u(!1)},onKeyDown:function(t){return"Enter"===t.key&&d()},label:"Add title",error:s,helperText:s&&"Title is required!"}),r.a.createElement(b.a,{color:"secondary"},r.a.createElement(J.a,{onClick:d})))})),q=Object(n.memo)((function(t){var e=t.title,a=t.changeTitle,c=r.a.useState(e),i=Object(V.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(!1),u=Object(V.a)(s,2),d=u[0],f=u[1],m=function(){f(!1),a(o)};return d?r.a.createElement(B.a,{color:"primary",value:o,onChange:function(t){l(t.currentTarget.value)},onKeyDown:function(t){return"Enter"===t.key&&m()},onBlur:m,autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){f(!0)}},e)})),Y=a(141),$=a(145),Q=a(144),X=a(155),Z=Object(n.memo)((function(t){var e=t.task,a=t.todolistID,c=t.removeTask,i=t.changeTaskStatus,l=t.changeTaskTitle,s=Object(v.a)({},e),u=s.id,d=s.status,f=s.title,m=Object(n.useCallback)((function(){return c(e.id,a)}),[e.id,a,c]),O=Object(n.useCallback)((function(t){var e=t.currentTarget.checked;i(u,a,e?o.Completed:o.New)}),[u,a,i]),T=Object(n.useCallback)((function(t){l(u,t,a)}),[u,a,l]);return r.a.createElement(Q.a,{key:u,className:d===o.Completed?"task isDone":"",alignItems:"center",disableGutters:!0,divider:!0},r.a.createElement(X.a,{size:"small",color:"primary",onChange:O,checked:d===o.Completed}),r.a.createElement(q,{title:f,changeTitle:T}),r.a.createElement(b.a,null,r.a.createElement($.a,{onClick:m})))})),_=Object(n.memo)((function(t){var e=G();Object(n.useEffect)((function(){var a;e((a=t.id,function(t){C(a).then((function(e){var n=e.data.items;t(function(t,e){return{type:"SET-TASK",tasks:t,todolistID:e}}(n,a))}))}))}),[]);var a=t.tasks;"active"===t.filter&&(a=t.tasks.filter((function(t){return t.status===o.New}))),"completed"===t.filter&&(a=t.tasks.filter((function(t){return t.status===o.Completed})));var c=function(e){return function(){return t.changeTodoListFilter(e,t.id)}},i=Object(n.useCallback)((function(e){return t.addTask(e,t.id)}),[t.addTask,t.id]),l=a.length?a.map((function(e){return r.a.createElement(Z,{key:e.id,task:e,todolistID:t.id,removeTask:t.removeTask,changeTaskTitle:t.changeTaskTitle,changeTaskStatus:t.changeTaskStatus})})):r.a.createElement("span",null,"I'm empty! Fill me up! ",r.a.createElement("b",null,"\u32e1"));return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(q,{title:t.title,changeTitle:function(e){return t.changeTodoListTitle(e,t.id)}}),r.a.createElement(b.a,null,r.a.createElement($.a,{color:"primary",onClick:function(){return t.removeTodolist(t.id)}}))),r.a.createElement(W,{addItem:i}),r.a.createElement(Y.a,{style:{listStyle:"none"}},l),r.a.createElement("div",null,r.a.createElement(E.a,{size:"small",variant:"outlined",color:"all"===t.filter?"secondary":"primary",onClick:c("all"),style:{margin:"5px"}},"All"),r.a.createElement(E.a,{size:"small",variant:"outlined",color:"active"===t.filter?"secondary":"primary",onClick:c("active"),style:{margin:"5px"}},"Active"),r.a.createElement(E.a,{size:"small",variant:"outlined",color:"completed"===t.filter?"secondary":"primary",onClick:c("completed"),style:{margin:"5px"}},"Completed")))})),tt=function(){var t=G();Object(n.useEffect)((function(){t((function(t){g().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data})}))}))}),[]);var e=Object(j.c)((function(t){return t.todolists})),a=Object(j.c)((function(t){return t.tasks})),c=Object(n.useCallback)((function(e,a){t(function(t,e){return function(a){A(t,e).then((function(n){0===n.data.resultCode&&a(function(t,e){return{type:"REMOVE-TASK",taskID:t,todolistID:e}}(t,e))}))}}(e,a))}),[t]),i=Object(n.useCallback)((function(e,a){t(function(t,e){return function(a){L(e,t).then((function(t){a({type:"ADD-TASK",task:t.data.data.item})}))}}(e,a))}),[t]),o=Object(n.useCallback)((function(e,a,n){t(R(e,a,{status:n}))}),[t]),l=Object(n.useCallback)((function(e,a,n){t(R(e,n,{title:a}))}),[t]),s=Object(n.useCallback)((function(e,a){var n=function(t,e){return function(a){S(e,t).then((function(n){a(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(t,e))}))}}(e,a);t(n)}),[t]),u=Object(n.useCallback)((function(e,a){t(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",id:t,filter:e}}(a,e))}),[t]),d=Object(n.useCallback)((function(e){var a=function(t){return function(e){I(t).then((function(a){e({type:"REMOVE-TODOLIST",id:t})}))}}(e);t(a)}),[t]),f=Object(n.useCallback)((function(e){var a=function(t){return function(e){D(t).then((function(t){e({type:"ADD-TODOLIST",todolist:t.data.data.item})}))}}(e);t(a)}),[t]),m=e.map((function(t){var e=a[t.id];return r.a.createElement(P.a,{item:!0,key:t.id},r.a.createElement(U.a,{variant:"elevation",style:{padding:"20px"}},r.a.createElement(_,{id:t.id,title:t.title,tasks:e,filter:t.filter,addTask:i,removeTask:c,removeTodolist:d,changeTaskStatus:o,changeTodoListFilter:u,changeTaskTitle:l,changeTodoListTitle:s})))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{container:!0,style:{padding:"20px 0"}},r.a.createElement(W,{addItem:f})),r.a.createElement(P.a,{container:!0,spacing:4},m))};var et=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{position:"static",color:"transparent"},r.a.createElement(O.a,{style:{justifyContent:"space-between"}},r.a.createElement(b.a,{edge:"start",color:"secondary","aria-label":"menu"},r.a.createElement(p.a,null)),r.a.createElement(T.a,{variant:"h5"},"Todolists"),r.a.createElement(E.a,{color:"secondary",variant:"outlined"},"Login"))),r.a.createElement(k.a,{fixed:!0},r.a.createElement(tt,null)))},at=Object(s.a)({palette:{primary:d.a,secondary:f.a,type:"light"}});i.a.render(r.a.createElement(j.a,{store:z},r.a.createElement(u.a,{theme:at},r.a.createElement(et,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},89:function(t,e,a){t.exports=a(108)},94:function(t,e,a){},95:function(t,e,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.feda7ac6.chunk.js.map